<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Imagem para Texto e Vice-Versa</title>
</head>
<body>

    <h2>Selecione uma imagem:</h2>
    <input type="file" id="inputImagem" accept="image/*">
    <br><br>

    <h3>Texto da Imagem (Base64):</h3>
    <textarea id="saidaTexto" rows="10" cols="50"></textarea>
    <br><br>

    <button onclick="converterParaImagem()">Converter para Imagem</button>

    <h3>Imagem Restaurada:</h3>
    <img id="imgResultado" style="max-width: 300px; display: none;">

    <script>
        // Quando o usuário seleciona uma imagem
        document.getElementById("inputImagem").addEventListener("change", function(event) {
            let arquivo = event.target.files[0];
            if (arquivo) {
                let leitor = new FileReader();

                leitor.onload = function(e) {
                    // Convertendo os dados da imagem para Base64
                    let base64 = e.target.result.split(',')[1]; // Remove o prefixo "data:image/png;base64,"
                    document.getElementById("saidaTexto").value = base64;
                };

                // Lendo a imagem como uma URL Base64
                leitor.readAsDataURL(arquivo);
            }
        });

        // Função para converter o texto de volta para imagem
        function converterParaImagem() {
            let base64 = document.getElementById("saidaTexto").value.trim();
            
            if (base64) {
                let img = document.getElementById("imgResultado");
                img.src = "data:image/png;base64," + base64; // Reconstruindo a URL Base64
                img.style.display = "block";
            } else {
                alert("O campo de texto está vazio!");
            }
        }
    </script>

</body>
</html>
